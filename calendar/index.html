<!doctype html>
<html lang="ca">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular.min.js" ></script>


    <link rel="stylesheet" href="fonts/icomoon/style.css">

    <link href='fullcalendar/packages/core/main.css' rel='stylesheet' />
    <link href='fullcalendar/packages/daygrid/main.css' rel='stylesheet' />


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- Style -->
    <link rel="stylesheet" href="css/style.css">

    <title>CALENDARI</title>
  </head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="cd-popup contact" role="alert">
  <form id="contactform" class="contact-form">
    <div class="cd-popup-container2" style="">
      <div class="container">
        <div class="row">
          <div class="col-md">
            <img id="flayer" width="70%" src="" alt="" srcset="">
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
  <div class="content">
    <div id='calendar'></div>
  </div>



    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script src='fullcalendar/packages/core/main.js'></script>
    <script src='fullcalendar/packages/interaction/main.js'></script>
    <script src='fullcalendar/packages/daygrid/main.js'></script>
    <script type="text/javascript">

    $(document).ready(function($) {
      //close popup when clicking x or off popup
      $('.cd-popup').on('click', function(event) {
        if ($(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup')) {
          event.preventDefault();
          $(this).removeClass('is-visible');
        }
      });

      //close popup when clicking the esc keyboard button
      $(document).keyup(function(event) {
        if (event.which == '27') {
          $('.cd-popup').removeClass('is-visible');
        }
      });

      /* ------------------- */
      /* Contact Form Labels */
      /* ------------------- */
      $('#name').keyup(function() {
        $('.name').addClass('typing');
        if ($(this).val().length == 0) {
          $('.name').removeClass('typing');
        }
      });
      $('#email').keyup(function() {
        $('.email').addClass('typing');
        if ($(this).val().length == 0) {
          $('.email').removeClass('typing');
        }
      });
      $('#message').keyup(function() {
        $('.message').addClass('typing');
        if ($(this).val().length == 0) {
          $('.message').removeClass('typing');
        }
      });

      /* ----------------- */
      /* Handle submission */
      /* ----------------- */
      $('#contactform').submit(function() {
        var name = $('#name').val();
        var email = $('#email').val();
        var message = $('#message').val();
        var human = $('#human:checked').val();

        if (human) {
          if (validateEmail(email)) {
            if (name) {
              if (message) {

    // Handle submitting data somewhere
    // For a tutorial on submitting the form to a Google Spreadsheet, see:
    // https://notnaturaltutorials.wordpress.com/2016/03/20/submit-form-to-spreadsheet/

    /*
                var googleFormsURL = "https://docs.google.com/forms/d/1dHaFG67d7wwatDtiVNOL98R-FwW1rwdDwdFqqKJggBM3nFB4/formResponse";
                // replace these example entry numbers
                var spreadsheetFields = {
                  "entry.212312005": name,
                  "entry.1226278897": email,
                  "entry.1835345325": message
                }
                $.ajax({
                  url: googleFormsURL,
                  data: spreadsheetFields,
                  type: "POST",
                  dataType: "xml",
                  statusCode: {
                    0: function() {

                    },
                    200: function() {

                    }
                  }
                });
    */

                closeForm();

              } else {
                $('#notification-text').html("<strong>Please let us know what you're thinking!</strong>");
                $('.notification').addClass('is-visible');
              }
            } else {
              $('#notification-text').html('<strong>Please provide a name.</strong>');
              $('.notification').addClass('is-visible');
            }
          } else {
            $('#notification-text').html('<strong>Please use a valid email address.</strong>');
            $('.notification').addClass('is-visible');
          }
        } else {
          $('#notification-text').html('<h3><strong><em>Warning: Please prove you are a human and not a robot.</em></strong></h3>');
          $('.notification').addClass('is-visible');
        }

        return false;
      });
    });



















    //ESTO ES EL CALENDARIO
    //Seleccionas todos los elementos con clase test
    var divs = document.getElementsByClassName("fc-day-grid-event fc-h-event fc-event fc-start fc-end fc-draggable");

        //Recorres la lista de elementos seleccionados
        for (var i=0; i< divs.length; i++) {
            //Añades un evento a cada elemento
            divs[i].addEventListener("click",function() {
               //Aquí la función que se ejecutará cuando se dispare el evento
               alert(this.innerHTML); //En este caso alertaremos el texto del cliqueado
            });
        }
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    const fecha = new Date();
    const dia = fecha.getDay();
    const mes = fecha.getMonth();
    const año = fecha.getFullYear();
    var variabledefecha = año+'-'+(mes+1)+'-'+dia+1;
    var stringfecha = toString(variabledefecha.value);


    var calendar = new FullCalendar.Calendar(calendarEl, {
      eventDidMount: function(info) {
      var tooltip = new Tooltip(info.el, {
        title: info.event.extendedProps.description,
        placement: 'top',
        trigger: 'hover',
        container: 'body'
      });
    },
      eventClick: function(info) {
        var eventObj = info.event;

        if (eventObj.src) {
          /**eventObj.src agregamos imagen segun el evento*/
          $('.contact').addClass('is-visible');
          document.getElementById("flayer").setAttribute("src", eventObj.src);

      }},
      plugins: [ 'interaction', 'dayGrid' ],
      defaultDate: stringfecha.value,
      editable: true,
      eventLimit: true, // allow "more" link when too many events
      events: [
        {
          groupId: 1,
          title: 'CHOCOLATADA POPULAR',
          start: '2022-11-08T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento4.jpg'
        },
        {
          groupId: 1,
          title: 'PRESENTACIÓ DE LA COMUNALITAT: LA FLORIDA S’AVEÏNA',
          start: '2022-11-16T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento2.jpg'
        },
        {
          groupId: 1,
          title: 'TROBADA POPULAR: CASTANYADA',
          start: '2022-11-28T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento3.jpg'
        },
        {
          groupId: 1,
          title: 'TROBADA POPULAR: CASTANYADA',
          start: '2022-11-28T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento3.jpg'
        },
        {
          groupId: 1,
          title: 'TROBADA POPULAR: CASTANYADA',
          start: '2022-11-28T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento3.jpg'
        },
        {
          groupId: 1,
          title: 'TROBADA POPULAR: CASTANYADA',
          start: '2022-11-28T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento3.jpg'
        },
        {
          groupId: 1,
          title: 'TROBADA POPULAR: CASTANYADA',
          start: '2022-11-28T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento3.jpg'
        },
        {
          groupId: 1,
          title: 'JORNADA ANTIMASCLISTA',
          start: '2022-11-25T17:30:00',
          description: 'description for All Day Event',
          /*url: 'http://google.com/',*/
          src:'../images/eventos/evento1.jpg'
        },
      ]


    });

    calendar.render();

  });

    </script>

    <script src="js/main.js"></script>

  </body>
 <script type="text/javascript">

 </script>
</html>
